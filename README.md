# IEA 정책 데이터 수집 

이 프로그램은 IEA(International Energy Agency) 웹사이트에서 정책 데이터를 스크래핑하여 CSV 파일로 저장하는 스크립트입니다. 정책 목록과 상세 정보를 병렬로 스크래핑하며, 수집한 데이터는 후속 분석에 유용하게 사용될 수 있습니다.

## 주요 기능
1. **정책 목록 페이지 스크래핑**: 
   - 정책명, URL, 국가, 연도 등의 정보 수집
2. **개별 정책 상세 페이지 스크래핑**: 
   - 내용, 주제, 정책 유형 등의 세부 정보 수집
3. **계산된 데이터 추가**: 
   - 정책 비용, 기간, 탄소 감소 비율 등
4. **CSV 파일 저장**: 
   - 정리된 데이터를 CSV 파일로 저장

## Airflow DAG 사용
이 DAG은 Airflow를 사용하여 `new_pol_03.py` 스크립트를 주기적으로 실행하는 워크플로우를 정의합니다.

### 설정 방법
1. Airflow 환경에 DAG 파일을 추가합니다.
2. 스크립트의 절대 경로를 확인하여 실행 준비를 합니다.
3. 이 DAG은 매일 자정(한국 표준시)에 실행되도록 스케줄링됩니다.

### 특이사항
- `new_pol_03.py` 스크립트는 `/opt/airflow/dags/scripts` 디렉토리에 위치해야 합니다.
- Airflow는 PythonOperator를 사용하여 스크립트를 실행합니다.
- 실패 시 작업은 최대 2회 재시도되며, 재시도 간격은 5분입니다.

## 주의사항
- 서버 과부하를 방지하기 위해 병렬 처리 워커 수를 적절히 조정해야 합니다.
- 스크래핑 정책 및 법률을 준수해야 합니다.

## 작성자
- 김민성

## 작성일
- 2024-12-07
